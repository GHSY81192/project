$(document).ready(function(){function NotesNav(){WindowHeight=$(window).height();DocumentHeight=$(document).scrollTop()+130;if(DocumentHeight>WindowHeight){$('.ctd-TrategyFloat-nav').show();}else{$('.ctd-TrategyFloat-nav').hide();}}
$(window).scroll(function(e){NotesNav();})});$(document).ready(function(){function NotesSider(){WindowHeight=$(window).height();ScrollTopHeight=$(document).scrollTop()+130;DocumentHeight=$(document).height();DocumentHeight=DocumentHeight-WindowHeight-100;if(ScrollTopHeight>WindowHeight){if(ScrollTopHeight<DocumentHeight){$('.ctd-Travel-sider .notes-box').addClass("notes-box-fixed").removeClass("notes-box-absolute5");}else{$('.ctd-Travel-sider .notes-box').removeClass("notes-box-fixed").addClass("notes-box-absolute5");}}else{$('.ctd-Travel-sider .notes-box').removeClass("notes-box-fixed").removeClass("notes-box-absolute");}}
$(window).scroll(function(e){NotesSider();})});$(document).ready(function(){function sideToolScroll(){WindowHeight=$(window).height();ScrollTopHeight=$(document).scrollTop()+130;DocumentHeight=$(document).height();articleHeight=$(".Travel-article").height();ctdcomment=$(".ctd-comment").height();DocumentHeight=DocumentHeight-WindowHeight-ctdcomment-200;marginTop=ScrollTopHeight-articleHeight+605;if(ScrollTopHeight>WindowHeight){if(ScrollTopHeight<DocumentHeight){$('.sideToolbar').addClass("notes-box-fixed");$('.sideToolbar').css("margin-top","30px")}else{$('.sideToolbar').css("margin-top",-marginTop);}}else{$('.sideToolbar').removeClass("notes-box-fixed").removeAttr("style");}}
function catalogCurrent(){var top=$(document).scrollTop();var menu=$(".sideCatalog-catalog");var items=$(".ctd-content").find(".ebma-chapter");var curId="";items.each(function(){var m=$(this);var mid=m.children("a");var itemsTop=m.offset().top;if(top>itemsTop-100){curId="#"+mid.attr("id");}else{return false;}});var curLink=menu.find(".current");var curlina=curLink.children("a").attr("href");if(curId&&curlina!=curId){curLink.removeClass("current");cur=menu.find("[href="+curId+"]");cur.parent().addClass("current");}};function catalogTabs(){$(this).addClass("current").siblings().removeClass("current");};$(window).scroll(function(){catalogCurrent();sideToolScroll();});$(document).on('click','.sideCatalog-catalog dd',catalogTabs);});$(document).ready(function(){var allEle=$(':header[class*="CatalogHd"]');var headLen=allEle.length;var ddArr=[];allEle.each(function(i){var sideIndex,sideName,ddId,active='',ddClass,sideAnchor;sideName=$(this).find('.head-con').text();if($(this).hasClass('CatalogHd-main')){sideAnchor=$(this).prev().attr('id');ddClass='CatalogSd-main';}else{sideAnchor=$(this).prev().attr('id');ddClass='CatalogSd-child';}
if(i==0){active='current';}
var ddHtml='<dd class="'+ddClass+' '+active+'">'+'<a href="#'+sideAnchor+'" title="'+sideName+'">'+sideName+'</a>'+'</dd>';ddArr.push(ddHtml);});$('.sideCatalog-catalog dl').html(ddArr.join(''));});$(document).ready(function(){var slideInnerHeight=$('.sideCatalog-catalog dl').height();var slideOutHeight=$('.sideCatalog-catalog').height();var enableTop=slideInnerHeight-slideOutHeight;if(enableTop<0){$('.ebn-button-down').removeClass('sideCatalog-down-enable').addClass('sideCatalog-down-disable');}
var step=112;$('.ebn-button-up').bind('click',function(){if($(this).hasClass('sideCatalog-up-enable')){var dltop=$('.sideCatalog-catalog dl').css('top');if(dltop=='auto'){dltop=0;}
if(Math.abs(enableTop-Math.abs(parseInt(dltop)))<step){if((enableTop-Math.abs(parseInt(dltop)))==0){$('.sideCatalog-catalog dl').stop().animate({'top':'0'},'fast');$(this).removeClass('sideCatalog-up-enable').addClass('sideCatalog-up-disable');$('.ebn-button-down').removeClass('sideCatalog-up-disable').addClass('sideCatalog-down-enable')}else{$('.sideCatalog-catalog dl').stop().animate({'top':'+='+step},'fast');$('.ebn-button-down').removeClass('sideCatalog-up-disable').addClass('sideCatalog-down-enable')}}else{$('.sideCatalog-catalog dl').stop().animate({'top':'0'},'fast');$(this).removeClass('sideCatalog-up-enable').addClass('sideCatalog-up-disable');$('.ebn-button-down').removeClass('sideCatalog-up-disable').addClass('sideCatalog-down-enable')}}else{return false}});$('.ebn-button-down').bind('click',function(){if($(this).hasClass('sideCatalog-down-enable')){var dltop=$('.sideCatalog-catalog dl').css('top');if(dltop=='auto'){dltop=0;}
if((enableTop-Math.abs(parseInt(dltop)))>step){$('.sideCatalog-catalog dl').stop().animate({'top':'-='+step},'fast');$('.ebn-button-up').removeClass('sideCatalog-up-disable').addClass('sideCatalog-up-enable')}else{if(enableTop<0){$(this).removeClass('sideCatalog-down-enable').addClass('sideCatalog-down-disable');}else{$('.sideCatalog-catalog dl').stop().animate({'top':-enableTop},'fast');$(this).removeClass('sideCatalog-down-enable').addClass('sideCatalog-down-disable');$('.ebn-button-up').removeClass('sideCatalog-up-disable').addClass('sideCatalog-up-enable');}}}else{return false}});});